(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{477:function(e,t,n){var content=n(487);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(58).default)("221e0342",content,!0,{sourceMap:!1})},478:function(e,t,n){var content=n(489);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(58).default)("46c98bef",content,!0,{sourceMap:!1})},479:function(e,t,n){var content=n(491);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(58).default)("15dcf5c2",content,!0,{sourceMap:!1})},480:function(e,t,n){var content=n(493);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(58).default)("5a14b697",content,!0,{sourceMap:!1})},486:function(e,t,n){"use strict";n(477)},487:function(e,t,n){var o=n(57)((function(i){return i[1]}));o.push([e.i,".editor[data-v-42c3b270]{height:100%;position:relative;width:100%}",""]),o.locals={},e.exports=o},488:function(e,t,n){"use strict";n(478)},489:function(e,t,n){var o=n(57)((function(i){return i[1]}));o.push([e.i,".editor[data-v-91b8c00e]{height:100%;position:relative;width:100%}",""]),o.locals={},e.exports=o},490:function(e,t,n){"use strict";n(479)},491:function(e,t,n){var o=n(57)((function(i){return i[1]}));o.push([e.i,".blockly[data-v-3b92c98e],.dynamic[data-v-3b92c98e]{height:100%;width:100%}.blockly[data-v-3b92c98e]{position:relative}",""]),o.locals={},e.exports=o},492:function(e,t,n){"use strict";n(480)},493:function(e,t,n){var o=n(57)((function(i){return i[1]}));o.push([e.i,".spinner{animation:spin .9s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}",""]),o.locals={},e.exports=o},494:function(e,t,n){"use strict";n.r(t);n(59),n(50),n(92),n(44),n(93);var o=n(16),r=n(35),l=(n(77),n(60),n(61),n(22),n(116),n(143),n(142),n(178),n(75),n(481)),c=n.n(l),d=n(114),h=(n(62),n(95),n(51),n(32),n(96),n(97),n(63),n(258),n(91),n(76),n(483));n(257),n(64),n(484);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={name:"AceEditor",props:{code:{type:String,default:function(){return""}}},data:function(){return{debounceId:null,editor:null}},watch:{code:function(e){this.editor.setValue(e,1)}},mounted:function(){var e,t=this;this.$ace.require("ace/config").setDefaultValue("session","useWorker",!1),(e=this.$ace).define("ace/mode/unlisp_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],(function(e,t){var n=e("ace/lib/oop"),o=e("ace/mode/text_highlight_rules").TextHighlightRules,r=function(){var e=this.createKeywordMapper({"keyword.control":"case|do|let|loop|if|else|when","keyword.operator":"eq|neq|and|or|env","constant.language":"null|nil|t_pass","support.function":"cons|car|cdr|cond|lambda|format|setq|setf|quote|eval|append|list|listp|memberp|load|progn|task"},"identifier",!0);this.$rules={start:[{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+'\-~/^]=?/},{token:"comment",regex:";.*$"},{token:["storage.type.function-type.unlisp","text","entity.name.function.unlisp"],regex:"(?:\\b(?:(def|defun|defmethod|defmacro))\\b)(\\s+)((?:\\w|\\-|\\!|\\?)*)"},{token:["punctuation.definition.constant.character.unlisp","constant.character.unlisp"],regex:"(#)((?:\\w|[\\\\+-=<>'\"&#])+)"},{token:["punctuation.definition.variable.unlisp","variable.other.global.unlisp","punctuation.definition.variable.unlisp"],regex:"(\\*)(\\S*)(\\*)"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+(?:L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?(?:L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b"},{token:e,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"string",regex:"'(?=.)",next:"qqstring"}],qqstring:[{token:"constant.character.escape.unlisp",regex:"\\\\."},{token:"string",regex:'[^"\\\\]+'},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"}]}};n.inherits(r,o),t.UnlispHighlightRules=r})),e.define("ace/mode/unlisp",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/unlisp_highlight_rules"],(function(e,t){var n=e("ace/lib/oop"),o=e("ace/mode/text").Mode,r=e("ace/mode/unlisp_highlight_rules").UnlispHighlightRules,l=function(){this.HighlightRules=r,this.$behaviour=this.$defaultBehaviour};n.inherits(l,o),function(){this.lineCommentStart=";",this.$id="ace/mode/unlisp"}.call(l.prototype),t.Mode=l})),this.editor=this.$ace.edit(this.$refs.editor),this.editor.setValue(""),this.editor.setTheme("ace/theme/tomorrow"),this.editor.session.setMode("ace/mode/unlisp"),this.editor.setWrapBehavioursEnabled(!0),this.editor.on("change",(function(){t.debounce((function(){t.$emit("compile",t.editor.getValue())}),500)}))},methods:{getCode:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],code="";return this.editor&&(code=this.editor.getValue(),e&&(code=function(code){return(code=(code=(code=code.replace(/;.*/g,"")).replace(/(\r\n|\n|\r)/gm," ")).replace(/\s+/g," ").trim()).replace(/([([])\s+|\s+([)\]])/g,"$1$2")}(code))),code},setCode:function(code){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(code=function(e,t){t=t||{indentString:"  ",newLineString:"\n"};for(var n=0,o="",r=!0,l=!1,c=!1,d=!1,h=!1,i=0;i<e.length;i++)switch(e.charAt(i)){case"(":h?h=!1:d||c||(r||(o+=t.newLineString),l=!0,o+=t.indentString.repeat(n),n+=1,r=!1),o+=e.charAt(i);break;case")":h?h=!1:d||(n-=1),o+=e.charAt(i);break;case"\n":case"\r":r=!0,o+=e.charAt(i),l=!1,c=!1;break;case" ":case"\t":(l||c||d)&&(o+=e.charAt(i));break;case";":h?h=!1:d||(c=!0),o+=e.charAt(i);break;case'"':h?h=!1:d=!d,o+=e.charAt(i);break;case"\\":h=!h,o+=e.charAt(i);break;default:h&&(h=!1),o+=e.charAt(i),r=!1}return o}(code)),this.editor.setValue(code,1)},setCompileOutput:function(output){if(output.err){var e=this.getPositionByIdx(this.editor.getValue(),output.err.idx);this.editor.session.setAnnotations([m(m({},e),{},{text:output.err.msg,type:"error"})])}else this.editor.session.setAnnotations([])},resize:function(){this.editor.resize()},getPositionByIdx:function(text,e){for(var t=text.split("\n"),i=0;i<t.length;i++){var n=t[i].concat("\n");if(!(n.length<e))break;e-=n.length}return{row:i,column:e}},debounce:function(e,t){this.debounceId&&clearTimeout(this.debounceId),this.debounceId=setTimeout(e,t)}}},y=v,k=(n(486),n(42)),w=Object(k.a)(y,(function(){var e=this;return(0,e._self._c)("div",{ref:"editor",staticClass:"editor"},[e._v("\n  "+e._s(e.code)+"\n")])}),[],!1,null,"42c3b270",null).exports,x={name:"AceLoger",props:{log:{type:String,default:function(){return""}}},data:function(){return{editor:null}},watch:{log:function(e){this.editor.setValue(e,1)}},mounted:function(){var e=this;this.editor=this.$ace.edit(this.$refs.editor),this.editor.setValue(""),this.editor.setTheme("ace/theme/tomorrow_night_eighties"),this.editor.session.setMode("ace/mode/json"),this.editor.session.setUseWorker(!1),this.editor.setWrapBehavioursEnabled(!0),this.editor.setReadOnly(!0),this.editor.setAnimatedScroll(!0),this.editor.on("change",(function(){e.editor.gotoLine(1e5,0,!0)}))},methods:{resize:function(){this.editor.resize()}}},_=(n(488),Object(k.a)(x,(function(){var e=this;return(0,e._self._c)("div",{ref:"editor",staticClass:"editor"},[e._v("\n  "+e._s(e.log)+"\n")])}),[],!1,null,"91b8c00e",null).exports),C=n(249),O={methods:{hideToolbox:function(){var e=document.getElementsByClassName("blocklyToolboxDiv")[0];e&&(e.style.zIndex=40)},showToolbox:function(){var e=document.getElementsByClassName("blocklyToolboxDiv")[0];setTimeout((function(){return e&&(e.style.zIndex=70)}),200)},toastError:function(e){this.$buefy.toast.open({duration:5e3,message:e,position:"is-bottom",type:"is-danger"})},toastSuccess:function(e){this.$buefy.toast.open({duration:5e3,message:e,position:"is-bottom",type:"is-success"})},openWelcomeAlert:function(){this.hideToolbox(),this.$buefy.dialog.alert({size:"wide-dialog",title:"Welcome to the Uniot Sandbox!",message:"<p>Hello there, and welcome to the Uniot Sandbox!</p><br><p>We've designed this platform to give you a taste of what the Uniot IoT Platform can do. Here you can immerse yourself in IoT scripting and get an introduction to the future possibilities of integration with Web3 technologies, right from your browser.</p><br><p>If you're a first-time visitor, we've pre-loaded a simple \"Hello World\" script to get you started. This script will sequentially switch three LEDs in the emulator, providing you a glance at how IoT scripting works in Uniot.</p><br><p>Now, let's get you started:</p><ul><li><strong>Explore</strong>: Take a look at the visual block editor where you can create and modify scripts. You can also delve into the Lisp compiler to see how your block code transforms into a high-performance Lisp script.</li><li><strong>Play</strong>: Use the emulator to see your script in action. The three LEDs serve as a simple illustration, providing a basic example of how IoT devices can interact and respond to scripts.</li><li><strong>Deploy</strong>: Once you've successfully compiled your script, you can load it into the Internet Computer canister. The next time you visit the Uniot Sandbox, your saved script will be automatically loaded for your convenience, using your unique browser fingerprint as your identifier.</li></ul><br><p>Remember, the Uniot Sandbox is only a small part of what the full Uniot Platform has to offer. We hope this experience sparks your curiosity and encourages you to explore further.</p><br><p>Enjoy your first steps in IoT scripting with Uniot Sandbox!</p>",confirmText:"Let's Rock!",onConfirm:this.showToolbox}).$options.destroyed.push(this.showToolbox)},openAlert:function(e){this.hideToolbox(),this.$buefy.dialog.alert({message:e,onConfirm:this.showToolbox}).$options.destroyed.push(this.showToolbox)},openConfirm:function(e,t){this.hideToolbox(),this.$buefy.dialog.confirm({message:e,onConfirm:t}).$options.destroyed.push(this.showToolbox)},openPromt:function(e,t,n){this.hideToolbox(),this.$buefy.dialog.prompt({message:e,inputAttrs:{placeholder:t},trapFocus:!0,onConfirm:n}).$options.destroyed.push(this.showToolbox)}}};function $(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,l=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw r}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var E={name:"FullEditor",components:{AceEditor:w,AceLogger:_,Splitpanes:h.b,Pane:h.a},mixins:[O],props:{blocks:{type:String,default:function(){return""}},code:{type:String,default:function(){return""}},margin:{type:Number,default:function(){return 0}}},data:function(){return{lastThrottle:0,output:"",terminated:!1,options:{media:"blockly/media/",grid:{colour:"#ced1e3"}},library:{predefined:[{name:"dwrite",params:["pin","state"]},{name:"dread",params:["pin"]},{name:"awrite",params:["pin","value"]},{name:"aread",params:["pin"]},{name:"bclicked",params:["button_id"]}],user:null}}},watch:{script:function(e){this.$refs.editor.setCode(e)},blocks:function(e){this.$refs.blockly.deserialize(e)}},mounted:function(){window.addEventListener("resize",this.onResizeViewport,!1),this.onResizeViewport(),this.$nextTick(this.onResizeViewport),this.initDialog(),this.$emit("ready")},beforeDestroy:function(){window.removeEventListener("resize",this.onResizeViewport)},methods:{throttle:function(e,t){var n=(new Date).getTime();if(!(n-this.lastThrottle<t))return this.lastThrottle=n,e()},emulatorHandler:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,l,c,d,output;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=function(e){return t.terminated?0:new Promise((function(t){return setTimeout(t,e)}))},!t.terminated){n.next=3;break}return n.abrupt("return",Object(C.b)(e));case 3:r={"#t":!0,"()":!1},l=e.split(" "),c=l[0],d=0,n.t0=c,n.next="dwrite"===n.t0?10:"task"===n.t0?13:17;break;case 10:return d=r[l[2]],t.$emit("ledChanged",Number(l[1]),Number(r[l[2]])),n.abrupt("break",19);case 13:return n.next=15,o(l[2]);case 15:return d=l[3],n.abrupt("break",19);case 17:return d=0,n.abrupt("break",19);case 19:return d=Number(d),(output=JSON.parse(t.output))&&(output.states.push({ask:e,answer:d}),t.output=JSON.stringify(output,0,2)),n.abrupt("return",d);case 23:case"end":return n.stop()}}),n)})))()},terminate:function(){this.terminated=!0},emulate:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var output;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.terminated=!1,e.output=JSON.stringify({states:[]},0,2),t.next=4,Object(C.a)(1e4,e.buildLibrary(),e.$refs.editor.getCode(!1),e.emulatorHandler);case 4:output=t.sent,e.output=JSON.stringify(output,0,2);case 6:case"end":return t.stop()}}),t)})))()},compile:function(){var code=this.$refs.blockly.getCode(),e=this.$refs.blockly.getPrimitives();return this.library.user=e,this.$refs.editor.setCode(code),{code:code,primitives:e}},onCompile:function(code){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var output;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.a)(1e4,e.buildLibrary(),code,C.b);case 2:(output=t.sent)&&(e.$refs.editor.setCompileOutput(output),e.output=JSON.stringify(output,0,2),e.$emit("compiled",e.$refs.blockly.serialize()));case 4:case"end":return t.stop()}}),t)})))()},buildLibrary:function(){var e=function(e){var t="";if(e){var n,o=$(e);try{for(o.s();!(n=o.n()).done;){var r=n.value;if("number"==typeof r.params){for(var l=[],i=0;i<r.params;i++)l.push("_"+i);r.params=l}var c=r.params.length?r.params.join(" "):"()";t+="(defjs ".concat(r.name," (").concat(c,")) ")}}catch(e){o.e(e)}finally{o.f()}}return t};return(e(this.library.predefined)+e(this.library.user)).slice(0,-1)},getCode:function(){return this.$refs.editor.getCode()},onResizeLeft:function(){this.$refs.blockly&&this.$refs.blockly.resize()},onResizeRight:function(){this.$refs.editor&&this.$refs.editor.resize(),this.$refs.logger&&this.$refs.logger.resize()},onResized:function(){this.$refs.editor&&this.$refs.editor.resize(),this.$refs.logger&&this.$refs.logger.resize(),this.$refs.blockly&&this.$refs.blockly.resize()},onResizeViewport:function(){this.resizeElement(this.$el),this.onResized()},resizeElement:function(element){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e-=element.getBoundingClientRect().top,e-=this.convertRemToPx(this.margin),e-=element.offsetTop,element.style.height=e+"px"},convertRemToPx:function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},initDialog:function(){this.$refs.blockly.getBlockly().alert=this.openAlert,this.$refs.blockly.getBlockly().confirm=this.openConfirm,this.$refs.blockly.getBlockly().prompt=this.openPromt}}},j=(n(490),{name:"EmulatorView",methods:{close:function(){this.$emit("close")}}});function T(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var z={layout:"main",name:"SandboxPage",components:{FullEditor:Object(k.a)(E,(function(){var e=this,t=e._self._c;return t("splitpanes",{staticClass:"default-theme dynamic",on:{resized:e.onResized,resize:function(t){return e.throttle(e.onResizeLeft,25)}}},[t("pane",{attrs:{"min-size":"20"}},[t("blockly-component",{ref:"blockly",staticClass:"blockly",attrs:{options:e.options}})],1),e._v(" "),t("pane",{attrs:{"min-size":"20"}},[t("splitpanes",{attrs:{horizontal:""},on:{resized:e.onResized,resize:function(t){return e.throttle(e.onResizeRight,100)}}},[t("pane",{attrs:{"min-size":"20",size:"60"}},[t("ace-editor",{ref:"editor",attrs:{code:e.code},on:{compile:e.onCompile}})],1),e._v(" "),t("pane",{attrs:{"min-size":"20",size:"40"}},[t("ace-logger",{ref:"logger",attrs:{log:e.output}})],1)],1)],1)],1)}),[],!1,null,"3b92c98e",null).exports,EmulatorView:Object(k.a)(j,(function(){var e=this._self._c;return e("div",{staticClass:"overlay p-6"},[e("button",{staticClass:"button is-link-hint is-pulled-right",attrs:{type:"button"},on:{click:this.close}},[e("b-icon",{attrs:{icon:"un-cross",pack:"uni-menu",type:"is-hint",size:"is-medium"}})],1)])}),[],!1,null,null,null).exports},mixins:[O],data:function(){return{isEmulatorShown:!1,waitingEditor:!0,localBlocks:null,loadedBlocks:null,isUploading:!1,script:"",led:{r:"led-outline",g:"led-outline",b:"led-outline"}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?T(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):T(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(d.b)({selectedDevice:"devices/getSelected",allDevices:"devices/getDevices"})),mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,t.t0=IC,t.next=5,e.getId();case 5:return t.t1=t.sent,t.next=8,t.t0.getScript.call(t.t0,t.t1);case 8:n=t.sent,t.next=15;break;case 11:t.prev=11,t.t2=t.catch(1),console.error(t.t2),e.toastError("Unable to fetch script from the IC canister!");case 15:n?(e.loadedBlocks=n,e.toastSuccess("Script successfully retrieved from the IC canister!")):(e.loadedBlocks='<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="gxfpF-)%)iAfd4;dnjhy">led_count</variable><variable id="FS5yh^5M7iS)uDpsb5EQ">id</variable><variable id=":|j[HNj]^7kLr-.c}]Iz">state</variable></variables><block type="variables_set" id="8w(hp85N%mt=JQV}S#4I" x="88" y="113"><field name="VAR" id="gxfpF-)%)iAfd4;dnjhy">led_count</field><comment pinned="true" h="61" w="250">The emulator has 3 LEDs: Red [id = 0], Green [id = 1], Blue [id = 2]. </comment><value name="VALUE"><block type="math_number" id="4!9])EOb9Ull:$aD/H@A"><field name="NUM">3</field></block></value></block><block type="procedures_defnoreturn" id="2pclGl=8U(]unLTFZ*/p" x="88" y="213"><mutation><arg name="id" varid="FS5yh^5M7iS)uDpsb5EQ"/><arg name="state" varid=":|j[HNj]^7kLr-.c}]Iz"/></mutation><field name="NAME">led_switch</field><comment pinned="true" h="44" w="314">This function switches the state of these LEDs.</comment><statement name="STACK"><block type="unlisp_special_dwrite" id="1G.sCQfT5`_Y@,wJl7xX"><value name="STATE"><shadow type="logic_boolean" id="{=w2wxEOl(g/.h;a%2/l"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="(COLA``k}!E.z-?=m2n4"><field name="OP">EQ</field><value name="A"><block type="math_modulo" id="Fb#)Qj4P46X]Z=?I=P]_"><value name="DIVIDEND"><shadow type="math_number" id="xR/jsYTTkDvIW~u}wk.4"><field name="NUM">64</field></shadow><block type="variables_get" id="0z%;8!NP2Gu;Bne{EO/="><field name="VAR" id=":|j[HNj]^7kLr-.c}]Iz">state</field></block></value><value name="DIVISOR"><shadow type="math_number" id="neSYQq|sNe`;?W^BX_{f"><field name="NUM">3</field></shadow><block type="variables_get" id="Gah@_X1@oy[DFE1zhwJW"><field name="VAR" id="gxfpF-)%)iAfd4;dnjhy">led_count</field></block></value></block></value><value name="B"><block type="variables_get" id="x=]qC0.-~:~0k@;GyEn7"><field name="VAR" id="FS5yh^5M7iS)uDpsb5EQ">id</field></block></value></block></value><value name="ID"><shadow type="math_number" id="C]wTnRGDT6t-54]zM:v}"><field name="NUM">0</field></shadow><block type="variables_get" id="gFS]Wv}{%*XydxOHZT!?"><field name="VAR" id="FS5yh^5M7iS)uDpsb5EQ">id</field></block></value></block></statement></block><block type="unlisp_special_task" id="D54uazM/ch3VeF${XqmU" x="88" y="463"><comment pinned="true" h="117" w="262">This is the entry point of each script. It specifies how many times the task will be executed and the execution interval. This particular script switches LEDs alternately 30 times every 100ms.</comment><value name="TIMES"><shadow type="math_number" id=";_qc96@ZR4QSk0/omS.2"><field name="NUM">30</field></shadow></value><value name="MS"><shadow type="math_number" id="?I.t?ZF*F}:t33s$iC])"><field name="NUM">100</field></shadow></value><statement name="OBJ"><block type="unlisp_controls_repeat" id="hng#6W$LsK-MBll+N~Fk"><value name="TIMES"><shadow type="math_number" id="1$W^imWXt#+ecyUVKgWC"><field name="NUM">3</field></shadow><block type="variables_get" id="iWh863l^GmNuNf^F3[Qo"><field name="VAR" id="gxfpF-)%)iAfd4;dnjhy">led_count</field></block></value><statement name="DO"><block type="procedures_callnoreturn" id="OYY24~x|GZ5MNKv)XFED"><mutation name="led_switch"><arg name="id"/><arg name="state"/></mutation><value name="ARG0"><block type="unlisp_while_itr" id="Dtac3ZjXFhqx_e[+0WCp"><field name="ITR">iterator</field></block></value><value name="ARG1"><block type="unlisp_special_task_pass" id="WeteF_dQxH[yjrnes6/A"><field name="PASS">task pass</field></block></value></block></statement></block></statement></block></xml>',e.openWelcomeAlert());case 16:case"end":return t.stop()}}),t,null,[[1,11]])})))()},methods:{hash:function(){return this.$auth.$state.user?this.$auth.$state.user.hash:""},compile:function(){var e=this,t=this.$refs.editor.compile().primitives;if(t=t.map((function(e){return e.name})),"none"!==this.selectedDevice){var n=this.allDevices.filter((function(t){return t.id===e.selectedDevice}))[0].primitives,o=t.filter((function(e){return!n.includes(e)}));o.length>0&&this.openAlert("Your device ".concat(this.selectedDevice," does not support these primitives: ").concat(o.join(", "),". The script may execute with an error on the device."))}},emulate:function(){this.$refs.editor.emulate()},terminate:function(){this.$refs.editor.terminate()},onCompile:function(e){this.localBlocks=e},getId:function(){return new Promise((function(e){c.a.get({excludes:{deviceMemory:!0,enumerateDevices:!0}},(function(t){var n=t.map((function(component){return component.value}));e(c.a.x64hash128(n.join(""),228))}))}))},deploy:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isUploading){t.next=20;break}return t.prev=1,e.isUploading=!0,t.t0=IC,t.next=6,e.getId();case 6:return t.t1=t.sent,t.t2=e.localBlocks,t.next=10,t.t0.addScript.call(t.t0,t.t1,t.t2);case 10:e.toastSuccess("Script successfully uploaded to the IC canister!"),t.next=17;break;case 13:t.prev=13,t.t3=t.catch(1),console.error(t.t3),e.toastError("Script upload to the IC canister failed!");case 17:return t.prev=17,e.isUploading=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,13,17,20]])})))()},onReady:function(){this.waitingEditor=!1},onLedChanged:function(e,t){var svg=t?"led-on":"led-outline";0===e&&(this.led.r=svg),1===e&&(this.led.g=svg),2===e&&(this.led.b=svg)},onEmulatorClose:function(){this.terminate(),this.isEmulatorShown=!1}}},A=z,R=(n(492),Object(k.a)(A,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"sandbox-container"},[t("div",{staticClass:"columns"},[t("div",{staticClass:"column is-four-fifths"},[t("h1",{staticClass:"title is-marginless pr-4"},[e._v("\n        Uniot Sandbox\n      ")]),e._v(" "),t("button",{staticClass:"button title-btn is-link-hint font-w500",attrs:{type:"button"},on:{click:e.compile}},[t("b-icon",{staticClass:"px-5",attrs:{pack:"uni-22px",icon:"un-compile"}}),e._v(" "),t("span",[e._v(" Compile ")])],1),e._v(" "),t("button",{staticClass:"button title-btn is-link-hint font-w500",attrs:{type:"button"},on:{click:e.emulate}},[t("b-icon",{staticClass:"px-5",attrs:{pack:"uni-22px",icon:"un-play"}}),e._v(" "),t("span",[e._v(" Emulate ")])],1),e._v(" "),t("button",{staticClass:"button title-btn is-link-hint font-w500",attrs:{type:"button"},on:{click:e.terminate}},[t("b-icon",{staticClass:"px-5",attrs:{pack:"uni-22px",icon:"un-stop"}}),e._v(" "),t("span",[e._v(" Terminate Emulation ")])],1),e._v(" "),e.localBlocks?t("button",{staticClass:"button title-btn is-link-hint font-w500",attrs:{loading:"true",type:"button"},on:{click:e.deploy}},[e.isUploading?t("b-icon",{staticClass:"px-5 spinner",attrs:{pack:"uni-22px",icon:"un-load"}}):t("b-icon",{staticClass:"px-5",attrs:{pack:"uni-22px",icon:"un-send"}}),e._v(" "),t("span",[e._v(" Upload to IC ")])],1):e._e()]),e._v(" "),t("div",{staticClass:"column"},[t("button",{staticClass:"button title-btn is-link-hint font-w500 is-pulled-right",attrs:{type:"button"},on:{click:e.emulate}},[t("b-icon",{staticClass:"px-2 has-text-danger",attrs:{icon:e.led.r}}),e._v(" "),t("b-icon",{staticClass:"px-2 has-text-success",attrs:{icon:e.led.g}}),e._v(" "),t("b-icon",{staticClass:"px-2 has-text-primary",attrs:{icon:e.led.b}})],1)])]),e._v(" "),t("div",{class:"card editor-card ".concat(e.waitingEditor&&"is-invisible")},[t("div",{staticClass:"card-content is-paddingless"},[e.isEmulatorShown?t("emulator-view",{on:{close:e.onEmulatorClose}}):e._e(),e._v(" "),t("client-only",[t("full-editor",{ref:"editor",attrs:{margin:1.5,blocks:e.loadedBlocks,code:e.script},on:{ready:e.onReady,ledChanged:e.onLedChanged,compiled:e.onCompile}})],1)],1)]),e._v(" "),e.waitingEditor?t("div",{staticClass:"loader-wrapper"},[t("div",{staticClass:"loader is-loading"})]):e._e()])}),[],!1,null,null,null));t.default=R.exports}}]);